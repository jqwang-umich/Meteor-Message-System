<head>
  <title>MessageApp</title>
</head>

<body>
  <!-- <h1>EECS 498 Message System</h1> -->
  {{>main}}
</body>

<template name = "main">
  <h1>EECS 498 Message System</h1>
  {{#if getCurrentUser}}
    {{> message}}
  {{else}}
    {{>Form}}
  {{/if}}
</template>

<template name="Form">
  {{>loginForm}}
  {{>signupForm}}
</template>

<template name="message">
  <h1>Current User: {{getCurrentUser}}</h1>
  <button id = "logout">Logout</button>
  {{#if getNumUsers}}
    {{#each getUsersList}}
      <button class = 'chatUser' id="{{user_name}}">{{user_name}}</button>
    {{/each}}
  {{else}}
    <h3>No other users</h3>
  {{/if}}

  {{#if getClickedUser}}
    <!-- <h3>getClickedUser is OK</h3> -->
    {{#each getChatHistories}}
      <h4>hahaha</h4>
      <h4>{{user_name1}}:{{content}}</h4>
      <button class = "btnMesDelete" id="{{_id}}">delete</button>
    {{/each}}
    <form id="send-msg">
        <input type="text"  name="messageText" placeholder="Input your message">
        <input type="submit" value="Send">
    </form>
  {{else}}
      <h3>No User Selected</h3>
  {{/if}}

</template>

<template name="loginForm">
    <h2>Login</h2>
    <form id = "login">
        <input type="text" name="loginName" placeholder="Input your username">
        <input type="submit" value="Login">
    </form>
    <h4>{{ getLoginError }}</h4>
  </template>

  <template name="signupForm">
      <h2>Signup</h2>
      <form id = "signup">
          <input type="text" name="signupName" placeholder="Input your username">
          <input type="submit" value="Signup">
      </form>
      {{ getSignupError }}
  </template>
